```yaml
name: Compile V2Ray-core .so Files Weekly

on:
  schedule:
    - cron: '0 0 * * 0' # 每周日 00:00 UTC
  workflow_dispatch:

jobs:
  compile-and-release:
    runs-on: ubuntu-latest

    steps:
      # 检出仓库
      - name: Checkout repository
        uses: actions/checkout@v4

      # 设置 Go 1.23.0
      - name: Set up Go
        uses: actions/setup-go@v5
        with:
          go-version: '1.23.0' # 明确指定 Go 1.23.0

      # 安装 gomobile（使用特定版本以避免 go.mod 问题）
      - name: Install gomobile
        run: |
          go install golang.org/x/mobile/cmd/gomobile@v0.0.0-20230531173155-e9d79c0b01dd
          gomobile init
        env:
          ANDROID_NDK_HOME: /usr/local/lib/android/sdk/ndk/21.4.7075529
          GO111MODULE: on
          GOPROXY: https://goproxy.cn,direct

      # 设置 Android NDK
      - name: Set up Android NDK
        uses: nttld/setup-ndk@v1
        with:
          ndk-version: r21e

      # 克隆 V2Ray-core
      - name: Clone V2Ray-core
        run: |
          git clone https://github.com/v2fly/v2ray-core.git
          cd v2ray-core
          git checkout v5

      # 编译 .so 文件
      - name: Compile .so files
        run: |
          mkdir -p output/jniLibs/arm64-v8a
          mkdir -p output/jniLibs/armeabi-v7a
          mkdir -p output/jniLibs/x86
          mkdir -p output/jniLibs/x86_64
          gomobile bind -o output/jniLibs/arm64-v8a/libv2ray.so -target=android/arm64 -androidapi=21 github.com/v2fly/v2ray-core/v5
          gomobile bind -o output/jniLibs/armeabi-v7a/libv2ray.so -target=android/arm -androidapi=21 github.com/v2fly/v2ray-core/v5
          gomobile bind -o output/jniLibs/x86/libv2ray.so -target=android/x86 -androidapi=21 github.com/v2fly/v2ray-core/v5
          gomobile bind -o output/jniLibs/x86_64/libv2ray.so -target=android/x86_64 -androidapi=21 github.com/v2fly/v2ray-core/v5

      # 打包 .so 文件
      - name: Package .so files
        run: |
          cd output
          zip -r libv2ray_so.zip jniLibs

      # 创建 Release
      - name: Create Release
        id: create_release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          tag_name: weekly-${{ github.run_id }}
          release_name: Weekly V2Ray .so Release ${{ github.run_id }}
          draft: false
          prerelease: false

      # 上传 Release 资产
      - name: Upload Release Asset
        uses: actions/upload-release-asset@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          upload_url: ${{ steps.create_release.outputs.upload_url }}
          asset_path: output/libv2ray_so.zip
          asset_name: libv2ray_so.zip
          asset_content_type: application/zip
```
